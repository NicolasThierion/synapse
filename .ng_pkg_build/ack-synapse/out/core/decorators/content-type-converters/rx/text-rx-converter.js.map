{"version":3,"file":"text-rx-converter.js","sourceRoot":"","sources":["../../../../../../../src/core/decorators/content-type-converters/rx/text-rx-converter.ts"],"names":[],"mappings":";;;;AACA,OAAO,EAAE,OAAO,EAAE,MAAM,4BAA4B,CAAC;AACrD,OAAO,EAAE,oBAAoB,EAAE,MAAM,oBAAoB,CAAC;AAC1D,OAAO,EAAE,YAAY,EAAE,MAAM,iCAAiC,CAAC;AAG/D,MAAM;;;;;IAEJ,OAAO,CAAC,QAAkB;QACxB,EAAE,CAAC,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACpC,MAAM,IAAI,YAAY,CAAC,+BAA+B,aAAa,CAAC,uBAAuB;MAC3F,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;SAC/C;QAED,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;KACxB;;;;;IAED,MAAM,CAAC,MAAM,CAAC,QAAkB;QAC9B,MAAM,CAAC,CAAC,CAAC,aAAa,CAAC,uBAAuB;aAC3C,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC;KAC5F;;wCAbiD,CAAC,oBAAoB,CAAC,IAAI,EAAE,oBAAoB,CAAC,UAAU,CAAC","sourcesContent":["import { ResponseContentTypeConverter } from './response-converter-store';\nimport { Headers } from '../../parameters.decorator';\nimport { ContentTypeConstants } from '../../../constants';\nimport { SynapseError } from '../../../../utils/synapse-error';\n\n// @dynamic // https://github.com/angular/angular/issues/19698#issuecomment-338340211\nexport class TextConverter implements ResponseContentTypeConverter<string> {\n  private static readonly SUPPORTED_CONTENT_TYPES = [ContentTypeConstants.JSON, ContentTypeConstants.PLAIN_TEXT];\n  convert(response: Response): Promise<string> {\n    if (!TextConverter.accept(response)) {\n      throw new SynapseError(`Expected content type to be ${TextConverter.SUPPORTED_CONTENT_TYPES}.\nGot ${response.headers.get(Headers.CONTENT_TYPE)}`);\n    }\n\n    return response.text();\n  }\n\n  static accept(response: Response): boolean {\n    return !!TextConverter.SUPPORTED_CONTENT_TYPES\n      .filter(type => (response.headers.get(Headers.CONTENT_TYPE)).indexOf(type) === 0).length;\n  }\n}\n"]}