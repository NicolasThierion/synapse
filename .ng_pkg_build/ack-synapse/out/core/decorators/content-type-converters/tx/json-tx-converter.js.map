{"version":3,"file":"json-tx-converter.js","sourceRoot":"","sources":["../../../../../../../src/core/decorators/content-type-converters/tx/json-tx-converter.ts"],"names":[],"mappings":";;;;;AACA,OAAO,EAAE,oBAAoB,EAAE,eAAe,EAAE,MAAM,oBAAoB,CAAC;AAC3E,OAAO,EAAE,YAAY,EAAE,MAAM,iCAAiC,CAAC;AAC/D,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,QAAQ,CAAC;AAErD,MAAM;;;;;;IACE,OAAO,CAAC,IAAS,EAAE,OAAgB;;YACvC,EAAE,CAAC,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBAChC,MAAM,IAAI,YAAY,CAAC;OACtB,OAAO,IAAI,GAAG,CAAC,CAAC;aAClB;YAED,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,YAAY,EAAE,oBAAoB,CAAC,IAAI,CAAC,CAAC;YAE7E,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,OAAO,EAAE;gBAC1C,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;aAC3B,CAAC,CAAC,CAAC;;KACL;;;;;IAED,MAAM,CAAC,MAAM,CAAC,IAAS;QACrB,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAC;KAC1D;CACF","sourcesContent":["import { RequestContentTypeConverter } from './request-converter-store';\nimport { ContentTypeConstants, HeaderConstants } from '../../../constants';\nimport { SynapseError } from '../../../../utils/synapse-error';\nimport { isArray, isObject, isString } from 'lodash';\n\nexport class JsonConverter implements RequestContentTypeConverter {\n  async convert(body: any, request: Request): Promise<Request> {\n    if (!JsonConverter.accept(body)) {\n      throw new SynapseError(`Expected body be Object | String | Array. \\\nGot \"${typeof body}\"`);\n    }\n\n    request.headers.set(HeaderConstants.CONTENT_TYPE, ContentTypeConstants.JSON);\n\n    return Promise.resolve(new Request(request, {\n      body: JSON.stringify(body)\n    }));\n  }\n\n  static accept(body: any): boolean {\n    return isObject(body) || isArray(body) || isString(body);\n  }\n}\n"]}